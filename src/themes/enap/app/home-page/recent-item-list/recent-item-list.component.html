<ng-container *ngVar="(itemRD$ | async) as itemRD">
  @if (itemRD?.hasSucceeded && itemRD?.payload?.page.length > 0) {
    <section class="recent-submissions-section enap-section">
      <h2 class="enap-section-title">{{ 'home.recent-submissions.head' | translate }}</h2>

      @for (item of itemRD.payload.page; track item) {
        <a class="recent-row" [routerLink]="[getItemRoute(item)]">
          <div class="recent-row-main">
            <span class="recent-row-title">{{ item.name }}</span>
            @if (getItemAuthor(item); as author) {
              <span class="recent-row-author">{{ author }}</span>
            }
          </div>
          @if (item.firstMetadataValue('dc.date.issued'); as dateIssued) {
            <span class="recent-row-date">{{ dateIssued }}</span>
          }
        </a>
      }

      <div class="recent-actions">
        <button (click)="onLoadMore()" class="btn-ver-todas" role="link" tabindex="0">
          Ver todas as publicações
        </button>
      </div>
    </section>
  }
  @if (itemRD?.hasFailed) {
    <ds-error message="{{'error.recent-submissions' | translate}}"></ds-error>
  }
  @if (!itemRD || itemRD.isLoading) {
    <ds-loading message="{{'loading.recent-submissions' | translate}}"></ds-loading>
  }
</ng-container>
