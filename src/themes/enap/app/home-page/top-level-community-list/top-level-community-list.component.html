<ng-container *ngVar="(communitiesRD$ | async) as communitiesRD">
  @if (communitiesRD?.isLoading) {
    <ds-loading message="{{'loading.top-level-communities' | translate}}"></ds-loading>
  }
  @if (communitiesRD?.hasFailed) {
    <ds-error message="{{'error.top-level-communities' | translate}}"></ds-error>
  }
  @if (communitiesRD?.hasSucceeded && categories.length > 0) {
    <section class="categories-section enap-section">
      <h2 class="enap-section-title">Comunidades</h2>
      <div class="categories-grid">
        @for (category of categories; track category.name) {
          <a class="category-card" [routerLink]="['/community-list']">
            <div class="category-icon">
              <i [class]="category.icon"></i>
            </div>
            <h3 class="category-name">{{ category.name }}</h3>
            <p class="category-description">{{ category.description }}</p>
            <div class="category-meta">
              <span class="category-badge">
                <i class="fas fa-file-alt me-1"></i>
                {{ category.totalItems | number }} itens
              </span>
              <span class="category-count">
                {{ category.communities.length }} comunidades
              </span>
            </div>
          </a>
        }
      </div>
      <div class="categories-actions">
        <a class="btn-ver-todas" routerLink="/community-list">
          Ver todas as comunidades
        </a>
      </div>
    </section>
  }
</ng-container>
